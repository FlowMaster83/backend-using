{"mappings":"YA6I0B,IAApBA,EAAUC,SAASC,cAAc,WACjCC,EAAYF,SAASC,cAAc,aACnCE,EAAcH,SAASC,cAAc,YACrCG,EAAaJ,SAASC,cAAc,aAgB1C,SAASI,EAAkBC,GACzBA,EAAMC,iBAEN,IAA8BC,EAAAF,EAAMG,cAAcC,SAA1CC,EAAsBH,EAAtBG,KAAMC,EAAgBJ,EAAhBI,YAIRC,EAAO,CACXC,MAAOH,EAAKI,MACZC,KAAMJ,EAAYG,QAyBtB,SAAwBF,GAER,IAARI,EAAU,CACdC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBH,KAAMI,KAAKC,UAAUR,IAGvB,OAAOS,MAAM,6CAA8CL,GAASM,MAClE,SAAAC,GACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,M,KArCpBC,CAAehB,GACZU,MAAK,WACJrB,EAAU4B,mBAAmB,YAanC,SAA0BC,KAAEC,G,IAAIlB,EAANiB,EAAMjB,MAAOE,EAAbe,EAAaf,KACrC,MAAO,4BAEFiB,OADCnB,EAAM,gBACFmB,OAALjB,EAAK,c,CAhBoCkB,CAAiBrB,G,IAE5DsB,OAAM,WACL/B,EAAWgC,UAAY,kB,IAExBC,SAAQ,WACPlC,EAAYiC,UAAY,GACxBE,YAAW,WACTlC,EAAWgC,UAAY,E,GACtB,I,IArCTrC,EAAQwC,iBAAiB,SAEzB,WACEpC,EAAYiC,UAAa,gQAOZpC,SAASC,cAAc,gBAC/BsC,iBAAiB,SAAUlC,E,IAqGlCiB,MAAM,+CAJU,CACdJ,OAAQ,WAGqDK,MAAK,SAAAC,G,OAClEgB,QAAQC,IAAIjB,E","sources":["src/index.js"],"sourcesContent":["/* для понимания:\n\nhttp/1.1\nзапрос на страницу\nзапрос на стили\nзапрос на стили\n\n*/\n\n/* http/2\n\nзапрос на страницу\nпаралельный запрос на стили и скрипты\n\npostman - запрос на бекенд без написания кода\nSOAP API (более защищенная, тяжело парсится, базируется на формате XML, тяжело сформировать хттп-запрос)\nREST API (максимально быстрая, передаёт данные в формате JSON, но не слишком большие и менее защищённая)\n\n*/\n\n/* \n\nТИПЫ ЗАПРОСОВ\n\nGET - ПОЛУЧЕНИЕ\nPOST - СОЗДАНИЕ\nPUT/PATCH - ОБНОВЛЕНИЕ\nDELETE - УДАЛЕНИЕ\n\n*/\n\n/* \n\nвыбираем эндпоинт https://swapi.dev/api/films/ - (films - это эндпоинт (функция))\nсмотрим на request параметры (прийдут, как параметры функции) - формируется через ?\nесли больше 1 параметра, разделяем знаком &\n*/\n\n/* \n\nКросс-доменные запросы - защита от посторонних запросов\n\nесть домен ресурса: rozetka.com\nвкладка network (отвечает за http-запросы)\nвкладка Headers - referer: домен, с которого уходит запрос на бекенд\nна бекенде есть массив с названиями сайтов, кому можна доверять\nесли сайта нет, будет CORS-ошибка (Request Header -> origin -> error)\n\nPOSTMAN - отдаст, но не факт, что будет работать через fetch.\n*/\n\n//==============\n\n// Пагинация\n\n// const BASE_URL = 'https://the-one-api.dev/v2';\n// const END_POINT = 'character';\n// const KEY = 'pTksQP-kRtSZO_M71kE_';\n\n// function getCharacter() {\n//   const param = new URLSearchParams({\n//     limit: 30,\n//     page: 1,\n//   });\n\n//   //   опция для типа запроса\n//   const option = {\n//     method: 'GET',\n//     headers: {\n//       Authorization: `Bearer ${KEY}`,\n//     },\n//   };\n\n//   fetch(`${BASE_URL}${END_POINT}?${param}`, option).then(response =>\n//     console.log(response)\n//   );\n// }\n\n// getCharacter();\n\n//==============\n\n// const BASE_URL = 'https://api.themoviedb.org/3';\n// const END_POINT = 'trending/movie/day';\n// const API_KEY = '155ac852b40c3d4bc41678b5b0356daa';\n// const list = document.querySelector('.js-list');\n\n// function getTrending() {\n//   fetch(`${BASE_URL}${END_POINT}?api_key=${API_KEY}&page=20`).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.statusText);\n//     }\n\n//     return response.json();\n//   });\n// }\n\n// getTrending()\n//   .then(data =>\n//     list.insertAdjacentHTML('beforeend', createMarkup(data.results))\n//   )\n//   .catch(err => console.log(err));\n\n// function createMarkup(arr) {\n//   return arr\n//     .map(\n//       ({ poster_path, title }) => `<li>\n//     <img  src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${title}\">\n//     <h2>${title}</h2>\n//   </li>`\n//     )\n//     .join('');\n// }\n\n//==============\n\n// CRUD - Create Read Update Delete\n// топ-5 запросов на бекенд\n// json placeholder - api\n\n// R - GET\n// работаем в Postman с вкладкой Body (form-data или raw - струкутура в формате json)\n\n// fetch('https://jsonplaceholder.typicode.com/posts/1')\n//   .then(response => response.json())\n//   .then(json => console.log(json));\n\n// {\n//   id: 1,\n//   title: '...',\n//   body: '...',\n//   userId: 1\n// }\n\n// C - POST\n\n// опции (строгая структура)\n// body - формат json\n// POST (отличие от GET) должен передать какую-то информацию\n// должен быть статус 201, в отличии от GET (200)\n\nconst addPost = document.querySelector('.js-add');\nconst listPosts = document.querySelector('.js-posts');\nconst formWrapper = document.querySelector('.js-form');\nconst errMessage = document.querySelector('.js-error');\n\naddPost.addEventListener('click', handlerAddPost);\n\nfunction handlerAddPost() {\n  formWrapper.innerHTML = `\n  <form action=\"submit\" class=\"js-form-add\" style: \"style=\"display: flex; flex-direction: column\">\n  <input type=\"text\" name=\"name\" />\n  <textarea name=\"description\" type=\"text\" cols=\"30\" rows=\"10\"></textarea>\n  <button>Add Post</button>\n  </form>`;\n\n  const form = document.querySelector('.js-form-add');\n  form.addEventListener('submit', handlerFormSubmit);\n}\n\nfunction handlerFormSubmit(event) {\n  event.preventDefault();\n\n  const { name, description } = event.currentTarget.elements;\n\n  // с функции никогда не отдавать готовый json\n  // строгий образец:\n  const data = {\n    title: name.value,\n    body: description.value,\n  };\n\n  addPostService(data)\n    .then(() => {\n      listPosts.insertAdjacentHTML('beforeend', createPostMarkup(data));\n    })\n    .catch(() => {\n      errMessage.innerHTML = 'Can`t add a post';\n    })\n    .finally(() => {\n      formWrapper.innerHTML = '';\n      setTimeout(() => {\n        errMessage.innerHTML = '';\n      }, 2000);\n    });\n}\n\nfunction createPostMarkup({ id, title, body }) {\n  return `<li data-id=\"id\">\n  <h2>${title}</h2>\n  <p>${body}</p>\n</li>`;\n}\n\nfunction addPostService(data) {\n  // строгий образец:\n  const options = {\n    method: 'POST',\n    headres: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  };\n\n  return fetch('https://jsonplaceholder.typicode.com/posts', options).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json();\n    }\n  );\n}\n\n//==============\n\n// U - PUT/PATCH\n// так же, как и при POST, но с указанием id (обязательно)\n// PUT (используется редко, нет нужды обновлять объект полностью) - обновляет всю структуру, кроме id\n// при недостаточном кол-ве элементов, все остальные будут удалены\n\n// const options = {\n//   method: 'PUT',\n//   body: JSON.stringify({\n//     id: 1,\n//     title: 'cat',\n//   }),\n//   headers: { 'Content-type': 'application/json' },\n// };\n\n// fetch('https://jsonplaceholder.typicode.com/posts/1', options)\n//   .then(response => response.json())\n//   .then(data => console.log(data));\n\n// PATCH - обновляет 1 элемент, который нужно обновить (используется чаще)\n// const options = {\n//   method: 'PUT',\n//   body: JSON.stringify({\n//     id: 1,\n//     title: 'cat',\n//     body: 'Hello dear cat',\n//     email: 'test@gmail.com',\n//   }),\n//   headers: { 'Content-type': 'application/json' },\n// };\n\n// fetch('https://jsonplaceholder.typicode.com/posts/1', options)\n//   .then(response => response.json())\n//   .then(data => console.log(data))\n//   .catch(err => console.log(err));\n\n// D - DELETE\n// Указывается только тот элемент, который надо удалить\n\nconst options = {\n  method: 'DELETE',\n};\n\nfetch('https://jsonplaceholder.typicode.com/posts/1', options).then(response =>\n  console.log(response)\n);\n"],"names":["$b8f9b7833fa37166$var$addPost","document","querySelector","$b8f9b7833fa37166$var$listPosts","$b8f9b7833fa37166$var$formWrapper","$b8f9b7833fa37166$var$errMessage","$b8f9b7833fa37166$var$handlerFormSubmit","event","preventDefault","_elements","currentTarget","elements","name","description","data","title","value","body","options1","method","headres","JSON","stringify","fetch","then","response","ok","Error","statusText","json","$b8f9b7833fa37166$var$addPostService","insertAdjacentHTML","param","id","concat","$b8f9b7833fa37166$var$createPostMarkup","catch","innerHTML","finally","setTimeout","addEventListener","console","log"],"version":3,"file":"index.ece808c4.js.map"}