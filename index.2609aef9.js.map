{"mappings":"YA6IM,IAAAA,EAAUC,SAASC,cAAc,WACjCC,EAAYF,SAASC,cAAc,aACnCE,EAAcH,SAASC,cAAc,YACrCG,EAAaJ,SAASC,cAAc,aAgB1C,SAASI,EAAkBC,GACzBA,EAAMC,iBAEN,IAAwBC,EAAAF,EAAMG,cAAcC,SAApCC,EAAgBH,EAAhBG,MAAOC,EAASJ,EAATI,KAGTC,EAAO,CACXF,MAAOA,EAAMG,MACbF,KAAMA,EAAKE,QAyBf,SAAwBD,GAEtB,IAAME,EAAU,CACdC,OAAQ,OACRC,QAAS,CACP,eAAgB,oBAElBL,KAAMM,KAAKC,UAAUN,IAGvB,OAAOO,MAAM,6CAA8CL,GAASM,MAClE,SAAAC,GACE,IAAKA,EAASC,GACZ,MAAM,IAAIC,MAAMF,EAASG,YAE3B,OAAOH,EAASI,M,KArCpBC,CAAed,GACZQ,MAAK,WACJnB,EAAU0B,mBAAmB,YAanC,SAA0BC,KAAEC,G,IAAInB,EAANkB,EAAMlB,MAAOC,EAAbiB,EAAajB,KACrC,MAAO,4BAEFmB,OADCpB,EAAM,gBACFoB,OAALnB,EAAK,c,CAhBoCoB,CAAiBnB,G,IAE5DoB,OAAM,WACL7B,EAAW8B,UAAY,kB,IAExBC,SAAQ,WACPhC,EAAY+B,UAAY,GACxBE,YAAW,WACThC,EAAW8B,UAAY,E,GACtB,I,IApCTnC,EAAQsC,iBAAiB,SAEzB,WACElC,EAAY+B,UAAa,0PAOZlC,SAASC,cAAc,gBAC/BoC,iBAAiB,SAAUhC,E","sources":["src/index.js"],"sourcesContent":["/* для понимания:\n\nhttp/1.1\nзапрос на страницу\nзапрос на стили\nзапрос на стили\n\n*/\n\n/* http/2\n\nзапрос на страницу\nпаралельный запрос на стили и скрипты\n\npostman - запрос на бекенд без написания кода\nSOAP API (более защищенная, тяжело парсится, базируется на формате XML, тяжело сформировать хттп-запрос)\nREST API (максимально быстрая, передаёт данные в формате JSON, но не слишком большие и менее защищённая)\n\n*/\n\n/* \n\nТИПЫ ЗАПРОСОВ\n\nGET - ПОЛУЧЕНИЕ\nPOST - СОЗДАНИЕ\nPUT/PATCH - ОБНОВЛЕНИЕ\nDELETE - УДАЛЕНИЕ\n\n*/\n\n/* \n\nвыбираем эндпоинт https://swapi.dev/api/films/ - (films - это эндпоинт (функция))\nсмотрим на request параметры (прийдут, как параметры функции) - формируется через ?\nесли больше 1 параметра, разделяем знаком &\n*/\n\n/* \n\nКросс-доменные запросы - защита от посторонних запросов\n\nесть домен ресурса: rozetka.com\nвкладка network (отвечает за http-запросы)\nвкладка Headers - referer: домен, с которого уходит запрос на бекенд\nна бекенде есть массив с названиями сайтов, кому можна доверять\nесли сайта нет, будет CORS-ошибка (Request Header -> origin -> error)\n\nPOSTMAN - отдаст, но не факт, что будет работать через fetch.\n*/\n\n//==============\n\n// Пагинация\n\n// const BASE_URL = 'https://the-one-api.dev/v2';\n// const END_POINT = 'character';\n// const KEY = 'pTksQP-kRtSZO_M71kE_';\n\n// function getCharacter() {\n//   const param = new URLSearchParams({\n//     limit: 30,\n//     page: 1,\n//   });\n\n//   //   опция для типа запроса\n//   const option = {\n//     method: 'GET',\n//     headers: {\n//       Authorization: `Bearer ${KEY}`,\n//     },\n//   };\n\n//   fetch(`${BASE_URL}${END_POINT}?${param}`, option).then(response =>\n//     console.log(response)\n//   );\n// }\n\n// getCharacter();\n\n//==============\n\n// const BASE_URL = 'https://api.themoviedb.org/3';\n// const END_POINT = 'trending/movie/day';\n// const API_KEY = '155ac852b40c3d4bc41678b5b0356daa';\n// const list = document.querySelector('.js-list');\n\n// function getTrending() {\n//   fetch(`${BASE_URL}${END_POINT}?api_key=${API_KEY}&page=20`).then(response => {\n//     if (!response.ok) {\n//       throw new Error(response.statusText);\n//     }\n\n//     return response.json();\n//   });\n// }\n\n// getTrending()\n//   .then(data =>\n//     list.insertAdjacentHTML('beforeend', createMarkup(data.results))\n//   )\n//   .catch(err => console.log(err));\n\n// function createMarkup(arr) {\n//   return arr\n//     .map(\n//       ({ poster_path, title }) => `<li>\n//     <img  src=\"https://image.tmdb.org/t/p/w300${poster_path}\" alt=\"${title}\">\n//     <h2>${title}</h2>\n//   </li>`\n//     )\n//     .join('');\n// }\n\n//==============\n\n// CRUD - Create Read Update Delete\n// топ-5 запросов на бекенд\n// json placeholder - api\n\n// R - GET\n// POST (отличие от GET) должен передать какую-то информацию\n// работаем в Postman с вкладкой Body (form-data или raw - струкутура в формате json)\n// должен быть статус 201, в отличии от GET (200)\n\n// fetch('https://jsonplaceholder.typicode.com/posts/1')\n//   .then(response => response.json())\n//   .then(json => console.log(json));\n\n// {\n//   id: 1,\n//   title: '...',\n//   body: '...',\n//   userId: 1\n// }\n\n// C - POST\n\n// опции (строгая структура)\n// body - формат json\n\nconst addPost = document.querySelector('.js-add');\nconst listPosts = document.querySelector('.js-posts');\nconst formWrapper = document.querySelector('.js-form');\nconst errMessage = document.querySelector('.js-error');\n\naddPost.addEventListener('click', handlerAddPost);\n\nfunction handlerAddPost() {\n  formWrapper.innerHTML = `\n  <form action=\"submit\" class=\"js-form-add\" style: \"style=\"display: flex; flex-direction: column\">\n  <input type=\"text\" name=\"title\" />\n  <textarea name=\"body\" type=\"text\" cols=\"30\" rows=\"10\"></textarea>\n  <button>Add Post</button>\n  </form>`;\n\n  const form = document.querySelector('.js-form-add');\n  form.addEventListener('submit', handlerFormSubmit);\n}\n\nfunction handlerFormSubmit(event) {\n  event.preventDefault();\n\n  const { title, body } = event.currentTarget.elements;\n\n  // с функции никогда не отдавать готовый json\n  const data = {\n    title: title.value,\n    body: body.value,\n  };\n\n  addPostService(data)\n    .then(() => {\n      listPosts.insertAdjacentHTML('beforeend', createPostMarkup(data));\n    })\n    .catch(() => {\n      errMessage.innerHTML = 'Can`t add a post';\n    })\n    .finally(() => {\n      formWrapper.innerHTML = '';\n      setTimeout(() => {\n        errMessage.innerHTML = '';\n      }, 2000);\n    });\n}\n\nfunction createPostMarkup({ id, title, body }) {\n  return `<li data-id=\"id\">\n  <h2>${title}</h2>\n  <p>${body}</p>\n</li>`;\n}\n\nfunction addPostService(data) {\n  // строгий образец:\n  const options = {\n    method: 'POST',\n    headres: {\n      'Content-type': 'application/json',\n    },\n    body: JSON.stringify(data),\n  };\n\n  return fetch('https://jsonplaceholder.typicode.com/posts', options).then(\n    response => {\n      if (!response.ok) {\n        throw new Error(response.statusText);\n      }\n      return response.json();\n    }\n  );\n}\n"],"names":["$b8f9b7833fa37166$var$addPost","document","querySelector","$b8f9b7833fa37166$var$listPosts","$b8f9b7833fa37166$var$formWrapper","$b8f9b7833fa37166$var$errMessage","$b8f9b7833fa37166$var$handlerFormSubmit","event","preventDefault","_elements","currentTarget","elements","title","body","data","value","options","method","headres","JSON","stringify","fetch","then","response","ok","Error","statusText","json","$b8f9b7833fa37166$var$addPostService","insertAdjacentHTML","param","id","concat","$b8f9b7833fa37166$var$createPostMarkup","catch","innerHTML","finally","setTimeout","addEventListener"],"version":3,"file":"index.2609aef9.js.map"}